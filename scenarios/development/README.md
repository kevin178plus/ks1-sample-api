# 开发环境启动脚本

## 📁 文件说明

### `start_proxy.bat` - 原版（简单版）
- **适用场景：** 快速启动，熟悉系统配置
- **特点：** 英文界面，功能简单
- **注意：** 需要在项目根目录运行，否则会闪退

### `start_proxy_optimized.bat` - 优化版（推荐）
- **适用场景：** 日常使用，完整功能
- **特点：** 
  - 中文界面，友好提示
  - 自动检查Python环境和依赖
  - 支持交互式创建.env文件
  - 包含文件监控功能检查
  - 显示详细服务信息
  - **集成网页调试界面**
- **使用：** 双击即可，自动切换到正确目录

## 🚀 使用建议

1. **首次使用：** 建议使用 `start_proxy_optimized.bat`
2. **快速启动：** 如果环境已配置好，可使用 `start_proxy.bat`
3. **调试模式：** 创建 `DEBUG_MODE.txt` 文件启用调试功能

## 📍 路径配置说明

### 🎯 **重要说明**
双击 `scenarios/development/` 目录下的批处理文件时：

- ✅ **实际运行：** 项目根目录的 `local_api_proxy.py`
- ✅ **配置读取：** 项目根目录的 `.env` 文件
- ❌ **不会运行：** `scenarios/development/local_api_proxy.py`

### 🔄 **路径切换逻辑**
所有批处理文件都包含：
```batch
cd /d "%~dp0\..\.."
```
- 从 `development/` 目录切换到项目根目录
- 确保使用统一的配置和主程序文件

### 📂 **文件用途**
- **项目根目录文件：** 实际运行的版本
- **development目录文件：** 场景备份/参考模板

这样设计的优势：
- 🎯 统一配置管理，避免多个.env文件混乱
- 🔧 集中维护，确保所有场景使用相同配置
- 📦 简化部署，减少配置文件复制错误

## ⚙️ 环境要求

- Python 3.7+
- Flask
- Requests
- Watchdog（可选，用于文件监控）

## 🌐 调试界面功能

### 💬 网页调试面板
访问 `http://localhost:5000/debug` 获得功能丰富的调试体验：

#### 📊 统计信息
- 实时调用次数统计
- 每日调用历史
- 最后更新时间

#### 💭 测试聊天（新增）
- **直接对话**：在网页中直接与AI对话
- **性能监控**：精确显示响应时间（毫秒）
- **状态指示**：实时显示请求状态
- **错误处理**：友好的错误信息提示
- **快捷操作**：Enter键快速发送

**使用步骤：**
1. 启动代理服务
2. 浏览器访问 `http://localhost:5000/debug`
3. 点击"测试聊天"标签
4. 开始测试对话和查看性能数据

## 🔧 故障排除

如果遇到闪退问题：
1. 确保项目根目录有 `.env` 文件
2. 使用 `start_proxy_optimized.bat` 而不是原版
3. 检查Python是否已正确安装并在PATH中

### 调试界面问题
- **访问失败**：确保代理服务正在运行在5000端口
- **调试模式未启用**：创建 `DEBUG_MODE.txt` 文件
- **缓存未配置**：在 `.env` 中添加 `CACHE_DIR` 配置