# 🖥️ Windows Server 2012 R2 专用场景

**适用场景：** Windows Server 2012 R2 服务器，2GB内存配置

## 📁 文件说明

### 🔧 核心服务文件
- **`minimal_server_proxy.py`** - 最小化API代理服务
  - 优化内存使用，移除文件监控
  - 限制并发和超时设置
  - 适合低配服务器

### 🛡️ 安全部署脚本 (推荐)
- **`minimal_setup.bat`** - 🌟 最小化配置脚本
  - ✅ 只配置必需项，零系统影响
  - ✅ 仅开放5000端口
  - ✅ 智能依赖检查
  - ✅ 新手友好

- **`safe_start.bat`** - 安全启动脚本
  - ✅ 无系统修改，直接启动
  - ✅ 完整的环境检查
  - ✅ 智能配置向导

- **`restore_system.bat`** - 🔄 系统回退脚本
  - ✅ 完整撤销优化脚本的所有修改
  - ✅ 恢复虚拟内存设置
  - ✅ 恢复系统服务
  - ✅ 清理临时文件

### 🌐 SSL配置选项
- **`simple_ssl_setup.bat`** - Windows 2012 R2 SSL配置
  - 自签名证书生成
  - Cloudflare免费SSL方案
  - HTTP直接部署选项

### ⚠️ 高级优化 (谨慎使用)
- **`win2012_optimization.bat`** - 系统优化脚本
  - ⚠️ 会修改系统设置，可能影响其他项目
  - 内存优化配置
  - 服务自动启动设置
  - 监控脚本创建

## 🚀 快速部署

### 🌟 推荐方案：最小化配置

#### 1. 最小化部署（零风险）
```bash
# 右键管理员运行（推荐新手）
minimal_setup.bat

# 启动服务
start_minimal.bat
```

#### 2. 安全启动（最简单）
```bash
# 直接启动，无任何系统修改
safe_start.bat
```

### 🔧 SSL配置（可选）
```bash
# 根据需要选择SSL方案
simple_ssl_setup.bat
```

### ⚠️ 高级优化（谨慎使用）
```bash
# 仅在了解风险的情况下使用
win2012_optimization.bat
```

### 🔄 回退操作
如果运行了高级优化脚本，需要回退：
```bash
# 管理员运行回退脚本
restore_system.bat
```

## 💡 优化特点

- **内存友好** - 移除不必要功能，降低内存占用
- **稳定可靠** - 自动重启机制，异常恢复
- **简化配置** - 适配旧系统，减少兼容性问题
- **SSL灵活** - 多种SSL方案，按需选择

## 📊 资源使用

- **内存占用**: ~50-100MB
- **CPU使用**: 低负载，适合2.5GHz单核
- **磁盘空间**: <50MB
- **网络带宽**: 根据API调用量决定

## ⚠️ 注意事项

1. **系统限制**: 2012 R2已停止主流支持，建议仅用于内网
2. **内存管理**: 2GB内存需要定期重启释放内存
3. **安全建议**: 配合云服务商安全组使用，限制访问来源
4. **SSL推荐**: 优先使用Cloudflare方案，避免服务器证书管理

## 🔧 监控和维护

```bash
# 查看服务状态
tasklist | find python.exe

# 手动重启
taskkill /f /im python.exe
python minimal_server_proxy.py

# 查看日志
type api_proxy.log
```

## 📞 故障排除

1. **内存不足** - 重启服务，检查内存使用
2. **端口占用** - 确认5000端口未被占用
3. **Python版本** - 确保Python 3.7-3.9版本
4. **依赖缺失** - 运行 `pip install flask requests`