<?php
/**
 * 简单的测试页面 - KuaeCloud API
 */
?>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>KuaeCloud API 测试</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 50px auto; padding: 20px; }
        textarea { width: 100%; height: 100px; margin: 10px 0; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        #response { background: #f4f4f4; padding: 15px; margin-top: 20px; white-space: pre-wrap; }
        .info { color: #666; font-size: 14px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>KuaeCloud API 测试</h1>
    <p class="info">本地 API 地址: http://localhost:12680/kuaecloud-api.php/v1/chat/completions</p>
    
    <textarea id="prompt" placeholder="输入你的问题...">你好，请介绍一下你自己</textarea>
    
    <button onclick="sendRequest()">发送请求</button>
    
    <div id="response">响应将显示在这里...</div>
    
    <script>
        const apiKey = 'sk-evyhjiwnpfbhrimwavlzsvpcfmgpuxijqrmtnobjvjnqyixg';
        
        async function sendRequest() {
            const prompt = document.getElementById('prompt').value;
            const responseDiv = document.getElementById('response');
            
            responseDiv.textContent = '请求中...';
            
            try {
                const response = await fetch('http://localhost:12680/kuaecloud-api.php/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + apiKey
                    },
                    body: JSON.stringify({
                        model: 'GLM-4.7',
                        messages: [
                            { role: 'user', content: prompt }
                        ],
                        max_tokens: 2000,
                        temperature: 0.7
                    })
                });
                
                const data = await response.json();
                responseDiv.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                responseDiv.textContent = '错误: ' + error.message;
            }
        }
    </script>
</body>
</html>
